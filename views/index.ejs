
<!DOCTYPE html>

<html lang="es" ng-app="databaseApp">
  <head>
    <title><%= title %></title>
      <link rel='stylesheet' href='/stylesheets/style.css' />
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

      <link rel="shortcut icon" href="">

          <h1><%= title %></h1>
    <p>Bienvenido a la pagina de Vinculacion de Proyectos CONACYT con Colaboracion de Empresas</p>


    <br>

  <style>
    #fb-btn{margin-top:13px;}
    #profile,#logout{display:none;}
    /* Remove the navbar's default margin-bottom and rounded borders */ 
    .navbar {
      margin-bottom: 0;
      border-radius: 0;
    }
    
    /* Add a gray background color and some padding to the footer */
    footer {
      background-color: #f2f2f2;
      padding: 25px;
    }
    
  .carousel-inner img {
      width: 100%; /* Set width to 100% */
      margin: auto;
      min-height:200px;
  }



  /* Hide the carousel text when the screen is less than 600 pixels wide */
  @media (max-width: 600px) {
    .carousel-caption {
      display: none; 
    }
  }


<style media="screen">

</style>

</head>




 <body>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '195030357710243',
      cookie     : true,
      xfbml      : true,
      version    : 'v2.8'
    });
      
   FB.getLoginStatus(function(response) {
    statusChangeCallback(response);
});

  };

  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "https://connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));



   function statusChangeCallback(response){
    if(response.status === 'connected'){
      console.log('Inicio de Sesion Autentificado');
      setElements(true);
      testAPI();
    }else{
      console.log('No hay Sesion o No a sido Autentificado');
      setElements(false);

    }
  };


function checkLoginState() {
  FB.getLoginStatus(function(response){
    statusChangeCallback(response);
  });
};

function setElements(isLoggedIn){
if(isLoggedIn){
    document.getElementById('logout').style.display = 'block';
    document.getElementById('profile').style.display = 'block';
    document.getElementById('fb-btn').style.display = 'none';
   
} else{
    document.getElementById('logout').style.display = 'none';
    document.getElementById('profile').style.display = 'none';
    document.getElementById('fb-btn').style.display = 'block';
    }
};

function logout(){
  FB.logout(function(response){
  setElements();
  });

function testAPI(){
      FB.api("/me?fields=name,email",function(response){
        if(response && !response.error){
          console.log(response);
        }
      });
  };

}

</script>

<div id=profile>profile</div>
 
<div
  class="fb-like"
  data-share="true"
  data-width="960"
  data-show-faces="true">
</div>

<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <div class="navbar-header">

      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>                        
      </button>
      <a class="navbar-brand" href="#">Logo</a>
    </div>
    <div class="collapse navbar-collapse" id="myNavbar">
      <ul class="nav navbar-nav">
        <li class="active"><a href="#">Home</a></li>
        <li><a href="#">Informacion</a></li>
        <li><a href="#">Contacto</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><fb:login-button id="fb-btn" scope="public_profile,email,user_birthday" onlogin="checkLoginState();"></fb:login-button></li>
        <li><a id="logout" href="#" onclick="logout()" ><span class="glyphicon glyphicon-log-in"></span>Cerrar Sesion</a><li>

              
      </ul>
    </div>
  </div>
</nav>

<div id="myCarousel" class="carousel slide" data-ride="carousel">
    <!-- Indicators -->
    <ol class="carousel-indicators">
      <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
      <li data-target="#myCarousel" data-slide-to="1"></li>
    </ol>

    <!-- Wrapper for slides -->
    <div class="carousel-inner" role="listbox">
      <div class="item active">
        <img src="http://www.conacyt.gob.mx/pci/images/images/LogoCONACYT_hori.png" alt="Image" style="width:1250px;height:350px;">
        <div class="carousel-caption">
        </div>      
      </div>

      <div class="item">
        <img src="http://vocesdelperiodista.mx/wp-content/uploads/2017/09/CONACYT.-Foto-Especial-890x395_c.jpg" alt="Image" style="width:1100px;height:350px;">
        <div class="carousel-caption">
          <h3>Bienvenido</h3>
          <p>Consulta tus Proyectos</p>
        </div>      
      </div>
    </div>

    <!-- Left and right controls -->
    <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
      <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
      <span class="sr-only">Previous</span>
    </a>
    <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
      <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
      <span class="sr-only">Next</span>
    </a>
</div>
  
<div class="container text-center">   

  <h3>Base de datos para consulta de proyectos y colaboradores de CONACYT</h3><br>


 
  <div class="row">
    <div class="col-sm-6" ng-controller="ColaboradoresCtrl">
    <div>
  <img src="http://www.generadordeideas.com.mx/proyectos/rotoplas16/img/esp/creacion_valor/icono_relacion_02_colaboradores.png" class="img-responsive" alt="Image"
  style="width:200px;height:150px;">
    
  </div>
    
    <table>
    <tr>
    <td><span class="glyphicon glyphicon-search"></td>
    <td><input type="text" ng-model="searchBox1" placeholder="Buscar"  class="form-control"></td>
    <td><button ng-click="getColaboradores()" class="btn btn" >Desplegar</button></td>
    <td><button type="button" class="btn" data-toggle="collapse" data-target="#demo">Formulario</button></td>
    </tr>
    </table>

    <div id="demo" class="collapse">
     <input type="text" ng-model="colaborador.nombre" placeholder="insertar nombre" class="form-control">
    <input type="text" ng-model="colaborador.email" placeholder="insertar email" class="form-control">
    <input type="text" ng-model="colaborador.categoria" placeholder="insertar categoria" class="form-control">
    <input type="text" ng-model="colaborador.sitio_web" placeholder="insertar sitio_web" class="form-control">
    <table>
    <tr>
    <td><button ng-click="addColaborador()" class="btn btn" >Agregar</button></td>
    <td><button ng-click="updateColaborador(colaborador)" class="btn btn" >Actualizar Info</button></td>
    </tr>
    </table>
    
  </div>
        <div ng-repeat="colaborador in colaboradores | filter:searchBox1" ng-click="showInfo(colaborador)">
      <br>
      <p class="list-group-item disabled">Id : <strong>{{colaborador._id}}</strong>
      <button ng-click="showColaborador(colaborador)" class="btn btn btn-s" data-toggle="collapse" data-target="#demo">Seleccionar</button>
      <button ng-click="deleteColaborador(colaborador._id)" class="btn btn btn-s">Borrar</button>
      </p>
    
      <p class="list-group-item">Nombre : <strong>{{colaborador.nombre}}</strong></p>
      <p class="list-group-item">Email : <strong>{{colaborador.email}}</strong></p>
      <p class="list-group-item">Categoria : <strong>{{colaborador.categoria}}</strong></p>
      <p class="list-group-item">Sitio Web : <strong>{{colaborador.sitio_web}}</strong></p>
      </div>

      <p>Colaboradores</p>
      </div>



    <div class="col-sm-6" ng-model="colaborador.nombre" ng-controller="ProyectosCtrl"> 
      <img src="http://supremainmobiliaria.com/images/layout/hotlink/proyectos.png" class="img-responsive" alt="Image" style="width:250px;height:100px;">
        <div class="row"><br><br>



     

  </div>


  <table>
    <tr>
    <td><span class="glyphicon glyphicon-search"></td>
    <td><input type="text" ng-model="searchBox2" placeholder="Buscar"  class="form-control"></td>
    <td><button ng-click="getProyectos()" class="btn btn" >Desplegar</button></td>
    <td><button type="button" class="btn" data-toggle="collapse" data-target="#demo2">Formulario</button></td>
    </tr>
    </table>

 <div id="demo2" class="collapse">
    <input type="text" ng-model="proyecto.nombre" placeholder="insertar nombre" class="form-control">
    <input type="text" ng-model="proyecto.descripcion" placeholder="insertar descripcion" class="form-control">
    <input type="text" ng-model="proyecto.area_conocimiento" placeholder="insertar area de conocimiento" class="form-control">
    <input type="text" ng-model="proyecto.fecha_inicio" placeholder="insertar fecha de inicio" class="form-control">
    <input type="text" ng-model="proyecto.fecha_fin" placeholder="insertar fecha de fin" class="form-control">
    <input type="text" ng-model="proyecto.presupuesto" placeholder="insertar presupuesto" class="form-control">
    <input type="text" ng-model="proyecto.colaborador" placeholder="insertar id del colaborador" class="form-control">
    <table>
    <tr>
    <td><button ng-click="addProyecto()" class="btn btn" >Agregar</button></td>
    <td><button ng-click="updateProyecto(proyecto)" class="btn btn" >Actualizar Info</button></td>
    </tr>
    </table>
  </div>

    

  


      <div ng-repeat="proyecto in proyectos | filter:searchBox2" ng-click="showInfo(proyecto)">
      <br>
      <p class="list-group-item disabled">Id : <strong>{{proyecto._id}}</strong>
      <button ng-click="showProyecto(proyecto)" class="btn btn btn-s" data-toggle="collapse" data-target="#demo2">Seleccionar</button>
      <button ng-click="deleteProyecto(proyecto._id)" class="btn btn btn-s">Borrar</button>
      </p>
      <p class="list-group-item">Nombre : <strong>{{proyecto.nombre}}</strong></p>
      <p class="list-group-item">Descripcion : <strong>{{proyecto.descripcion}}</strong></p>
      <p class="list-group-item">Area de Conocimiento : <strong>{{proyecto.area_conocimiento}}</strong></p>
      <p class="list-group-item">Fecha Inicio : <strong>{{proyecto.fecha_inicio}}</strong></p>
      <p class="list-group-item">Fecha Fin : <strong>{{proyecto.fecha_fin}}</strong></p>
      <p class="list-group-item">Presupuesto : <strong>{{proyecto.presupuesto}}</strong></p>
      <p class="list-group-item">Colaboradores : <strong>{{proyecto.colaborador.nombre}}</strong></p> 
      </div>

      <p>Proyectos</p>    
      </div>
      </div>

      
      </div><br>

<footer class="container-fluid text-center">
  <p>Footer Text</p>

    <script type="text/javascript" src="/lib/jquery/dist/jquery.min.js"></script>
    <script type="text/javascript" src="/lib/angular/angular.js"></script>

    <script type="text/javascript" src="/js/services/databaseServ.js"></script>
    <script type="text/javascript" src="/js/controllers/databaseCtrl.js"></script>
    <script type="text/javascript" src="/js/main.js"></script>
</footer>

</body>
</html>

